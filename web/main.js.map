{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/modules/subMenu.js","webpack:///./assets/modules/filter.js","webpack:///./assets/App.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","onInit","navItems","document","querySelectorAll","length","forEach","navParent","[object Object]","node","this","element","parentId","dataset","childContainer","querySelector","open","setChildOpen","addEventListener","onClick","e","console","log","stopPropagation","classList","add","remove","filter","window","filters","dataType","filterDataType","queryString","getFilterString","requestUrl","fetch","credentials","headers","X-Requested-With","then","res","text","content","section","innerHTML","DropdownFilter","type","filterType","onChange","push","selectedOptions","getValue","CheckboxFilterGroup","checkboxes","Array","children","child","label","id","innerText","values","checkbox","checked","getValues","filter_onInit"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","class SubMenu\n{\n    constructor(node) {\n        this.element = node;\n        this.parentId = this.element.dataset.navParent;\n        this.childContainer = document.querySelector(`[data-nav-child=\"${this.parentId}\"]`);\n        this.open = false;\n        this.setChildOpen(this.open);\n        this.element.addEventListener('click', this.onClick.bind(this));\n    }\n\n    onClick(e) {\n        console.log('click');\n        this.open = !this.open;\n        this.setChildOpen(this.open);\n        e.stopPropagation();\n    }\n\n    setChildOpen(open) {\n        const activeClass = 'Menu-item-subMenu--mobile-active';\n        if (open) {\n            this.childContainer.classList.add(activeClass);\n        } else {\n            this.childContainer.classList.remove(activeClass);\n        }\n    }\n}\n\nexport const onInit = () => {\n    const navItems = document.querySelectorAll('[data-nav-parent]');\n    if (navItems && navItems.length) {\n        navItems.forEach(navParent => {\n            new SubMenu(navParent);\n        });\n    }\n};","const filter = () => {\n    window.filters = window.filters || [];\n    const dataType = document.querySelector('[data-filter-data-type]').dataset.filterDataType;\n\n    let queryString = '';\n    window.filters.forEach(filter => {\n        if (queryString.length) {\n            queryString += '&';\n        }\n        queryString += filter.getFilterString();\n    });\n\n    const requestUrl = `/${dataType}/?${queryString}`\n        fetch(requestUrl, {\n            credentials: 'same-origin',\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest',\n            }\n        })\n        .then(res => res.text())\n        .then(content => {\n            const section = document.querySelector('.ThingsToDo');\n            section.innerHTML = '';\n            section.innerHTML = content;\n        });\n\n};\n\nclass DropdownFilter {\n    constructor(node, type) {\n        window.filters = window.filters || [];\n        this.element = node;\n        this.filterType = type;\n        this.element.addEventListener('change', this.onChange.bind(this));\n        window.filters.push(this);\n    }\n\n    onChange(e) {\n        filter();\n    }\n\n    getValue() {\n        return this.element.selectedOptions[0].value;\n    }\n\n    getFilterString() {\n        return `${this.filterType}=${this.getValue()}`;\n    }\n}\n\nclass CheckboxFilterGroup {\n    constructor(node, type) {\n        window.filters = window.filters || [];\n        this.element = node;\n        this.checkboxes = [];\n        this.filterType = type;\n        Array.prototype.forEach.call(this.element.children, child => {\n            if (child.type == 'checkbox') {\n                if (child.dataset.label) {\n                    document.querySelector(`label[for=\"${child.id}\"]`).innerText = child.dataset.label;\n                }\n                child.addEventListener('change', this.onChange.bind(this));\n                this.checkboxes.push(child);\n            }\n        });\n        window.filters.push(this);\n    }\n\n    onChange(e) {\n        filter();\n    }\n\n    getValues() {\n        let values = '';\n        Array.prototype.forEach.call(this.checkboxes, checkbox => {\n            if (checkbox.checked) {\n                if (values.length) {\n                    values += ',';\n                }\n                values += checkbox.dataset.label;\n            }\n        });\n\n        return values;\n    }\n\n    getFilterString() {\n        return `${this.filterType}=${this.getValues()}`;\n    }\n}\n\nexport const onInit = () => {\n    const filters = document.querySelectorAll('[data-filter]');\n    if (filters && filters.length) {\n        filters.forEach(filter => {\n            const filterType = filter.dataset.filter;\n            switch (filterType) {\n                case 'cuisine':\n                case 'cost':\n                    new DropdownFilter(filter, filterType);\n                    break;\n                case 'epicentre':\n                    new CheckboxFilterGroup(filter, filterType);\n                    break;\n                default:\n                    console.log('no match');\n            }    \n        })\n    }\n};","import { onInit as subMenu } from './modules/subMenu';\nimport { onInit as filter } from './modules/filter';\nimport './scss/app.scss';\nclass App\n{\n    constructor() {\n        subMenu();\n        filter();\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', new App);"],"sourceRoot":""}